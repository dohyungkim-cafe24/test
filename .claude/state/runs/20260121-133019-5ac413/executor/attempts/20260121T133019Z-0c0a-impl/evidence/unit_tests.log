============================= test session starts ==============================
platform darwin -- Python 3.13.5, pytest-9.0.2, pluggy-1.6.0 -- /Users/briankim/Desktop/ai/agi-dev/projects/punch-analytics/backend/.venv/bin/python3.13
cachedir: .pytest_cache
rootdir: /Users/briankim/Desktop/ai/agi-dev/projects/punch-analytics/backend
configfile: pyproject.toml
plugins: anyio-4.12.1, asyncio-1.3.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 14 items

projects/punch-analytics/backend/tests/test_auth.py::TestKakaoOAuth::test_kakao_auth_redirects_to_provider PASSED [  7%]
projects/punch-analytics/backend/tests/test_auth.py::TestKakaoOAuth::test_kakao_callback_with_valid_code_creates_session PASSED [ 14%]
projects/punch-analytics/backend/tests/test_auth.py::TestKakaoOAuth::test_kakao_callback_with_invalid_code_returns_error PASSED [ 21%]
projects/punch-analytics/backend/tests/test_auth.py::TestKakaoOAuth::test_kakao_callback_preserves_redirect_uri PASSED [ 28%]
projects/punch-analytics/backend/tests/test_auth.py::TestGoogleOAuth::test_google_auth_redirects_to_provider PASSED [ 35%]
projects/punch-analytics/backend/tests/test_auth.py::TestGoogleOAuth::test_google_callback_with_valid_code_creates_session PASSED [ 42%]
projects/punch-analytics/backend/tests/test_auth.py::TestSessionManagement::test_refresh_token_returns_new_access_token PASSED [ 50%]
projects/punch-analytics/backend/tests/test_auth.py::TestSessionManagement::test_refresh_with_expired_token_returns_401 PASSED [ 57%]
projects/punch-analytics/backend/tests/test_auth.py::TestSessionManagement::test_logout_clears_session PASSED [ 64%]
projects/punch-analytics/backend/tests/test_auth.py::TestAuthGuard::test_protected_route_without_token_returns_401 PASSED [ 71%]
projects/punch-analytics/backend/tests/test_auth.py::TestAuthGuard::test_protected_route_with_valid_token_returns_user PASSED [ 78%]
projects/punch-analytics/backend/tests/test_auth.py::TestAuthGuard::test_protected_route_with_expired_token_returns_401 PASSED [ 85%]
projects/punch-analytics/backend/tests/test_auth.py::TestOAuthErrorHandling::test_kakao_callback_cancelled_by_user PASSED [ 92%]
projects/punch-analytics/backend/tests/test_auth.py::TestOAuthErrorHandling::test_google_callback_missing_state_returns_error PASSED [100%]

============================== 14 passed in 0.10s ==============================
